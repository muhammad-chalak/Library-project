<!DOCTYPE html>
<html lang="ckb" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>کتێبخانەی شاھانە</title>
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts for a elegant look (e.g., Playfair Display for headings, Merriweather for body) -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6C5CE7"> <!-- Primary color for Android task switcher -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="کتێبخانەی شاھانە">
    <link rel="apple-touch-icon" href="photos/profile-app.jpg"> <!-- Adjust path to your icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="photos/profile-app.jpg">
    <link rel="icon" type="image/png" sizes="16x16" href="photos/profile-app.jpg">
</head>
<body>

    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="book-animation">
            <i class="fas fa-book-open"></i>
        </div>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="main-content hidden">
        <!-- Header / Navigation Bar -->
        <header class="header">
            <div class="container">
                <div class="logo">
                    <a href="#">کتێبخانەی شاھانە</a>
                </div>
                <!-- Hamburger Menu Button -->
                <button class="hamburger-menu" id="hamburger-menu">
                    <i class="fas fa-bars"></i>
                </button>
                <nav class="navbar" id="main-navbar">
                    <ul>
                        <li><a href="#hero">سەرەتا</a></li>
                        <li><a href="#categories">بەشەکان</a></li>
                        <li><a href="#contact">پەیوەندی</a></li>
                        <!-- NEW LINK for Add Book Section -->
                        <li><a href="#add-book-section">زیادکردنی کتێب</a></li>
                        <li class="settings-menu-item">
                            <a href="#" id="settings-toggle">ڕێکخستنەکان <i class="fas fa-chevron-down"></i></a>
                            <div class="settings-dropdown" id="settings-dropdown">
                                <button id="theme-toggle-btn" class="btn secondary-btn theme-toggle">
                                    <i class="fas fa-moon"></i> دۆخی تاریک/ڕۆشناک
                                </button>
                            </div>
                        </li>
                    </ul>
                </nav>
                <div class="search-bar-header">
                    <input type="text" id="header-search-input" placeholder="گەڕان بەدوای کتێبدا...">
                    <button><i class="fas fa-search"></i></button>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section id="hero" class="hero-section">
            <div class="container">
                <div class="hero-content">
                    <h1>گەنجینەی زانست لەبەردەستتدایە</h1>
                    <p>دەروازەیەک بۆ جیھانێکی پڕ لە زانیاری و چیرۆکە سەرنجڕاکێشەکان.</p>
                    <a href="#categories" class="btn primary-btn scroll-to-categories">دەستپێکردنی گەشت</a>
                </div>
            </div>
        </section>

        <!-- Book Categories Section -->
        <section id="categories" class="categories-section">
            <div class="container">
                <h2 class="section-title">بەشەکانی کتێب</h2>

                <!-- Category: کتێبی عەقیدە -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی عەقیدە</h3>
                    <div class="book-grid" id="عەقیدە-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="all-books.html?category=عەقیدە" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی تەفسیر -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی تەفسیر</h3>
                    <div class="book-grid" id="تەفسیر-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="tafseer-books.html?category=تەفسیر" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی حەدیس -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی حەدیس</h3>
                    <div class="book-grid" id="حەدیس-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="hadis-books.html?category=حەدیس" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی سیرەی موسولمانان -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی سیرەی موسولمانان</h3>
                    <div class="book-grid" id="سیرەی موسولمانان-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="sira-muslim-books.html?category=سیرەی موسولمانان" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی فقە -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی فقە</h3>
                    <div class="book-grid" id="فیقه-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="fka-books.html?category=فیقه" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی هەمەجۆری ئیسلامی -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی هەمەجۆری ئیسلامی</h3>
                    <div class="book-grid" id="هەمەجۆری ئیسلامی-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="hamajor-muslim-books.html?category=هەمەجۆری ئیسلامی" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی سیاسەت -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی سیاسەت</h3>
                    <div class="book-grid" id="سیاسەت-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="syasat-books.html?category=سیاسەت" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی مێژوو -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی مێژوو</h3>
                    <div class="book-grid" id="مێژوو-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="mezhu-books.html?category=مێژوو" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: کتێبی هەمەجۆر -->
                <div class="category-block">
                    <h3 class="category-title">کتێبی هەمەجۆر</h3>
                    <div class="book-grid" id="هەمەجۆر-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="hamajor-books.html?category=هەمەجۆر" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

                <!-- Category: هەموو کتێبەکان -->
                <div class="category-block">
                    <h3 class="category-title">هەموو کتێبەکان</h3>
                    <div class="book-grid" id="هەموو کتێبەکان-books">
                        <!-- Books will be loaded here by JavaScript -->
                    </div>
                    <div class="more-btn-container">
                        <a href="hamu-books.html?category=هەموو کتێبەکان" class="btn secondary-btn view-more-btn btn-sm">زیاتر ببینە</a>
                    </div>
                </div>

            </div>
        </section>
        
        <!-- NEW: Add Book/CMS Section -->
        <section id="add-book-section" class="categories-section" style="padding-bottom: 0; background-color: var(--card-bg);">
            <div class="container">
                <h2 class="section-title">زیادکردنی کتێب و بەڕێوەبردن</h2>

                <!-- 1. Password Protection Form -->
                <div id="cms-login-area" class="category-block" style="box-shadow: none;">
                    <h3 class="category-title">چوونە ژوورەوە</h3>
                    <form id="cms-login-form" class="contact-form" style="max-width: 400px; margin: 0 auto; gap: 15px;">
                        <input type="password" id="cms-password-input" placeholder="وشەی نهێنی" required>
                        <button type="submit" class="btn primary-btn" style="width: 100%;">چوونە ژوورەوە</button>
                        <p id="cms-login-message" style="color: #dc3545; display: none; margin-top: 10px;"></p>
                    </form>
                </div>

                <!-- 2. CMS Content (Hidden by default) -->
                <div id="cms-content" style="display: none;">
                    
                    <!-- Add Book Form -->
                    <div id="add-book-area" class="category-block">
                        <h3 class="category-title">زیادکردنی کتێبێکی نوێ</h3>
                        <form id="add-book-form" class="contact-form" style="max-width: 600px; margin: 0 auto; gap: 20px;">
                            <!-- Hidden input for Edit Mode -->
                            <input type="hidden" id="book-edit-id" value="">
                            
                            <!-- Book Title -->
                            <input type="text" id="book-title-input" placeholder="ناوی کتێب" required>

                            <!-- Author Name -->
                            <input type="text" id="book-author-input" placeholder="ناوی نووسەر" required>

                            <!-- Category Select -->
                            <select id="book-category-select" required style="
                                background-color: var(--input-bg);
                                border: 1px solid var(--input-border);
                                border-radius: 5px;
                                padding: 15px;
                                color: var(--light-text);
                                font-size: 1rem;
                                outline: none;
                                text-align: right;
                                transition: background-color 0.5s ease, border-color 0.5s ease;
                                appearance: none;
                                /* Add dropdown arrow for style */
                                background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="%23${getComputedStyle(document.body).getPropertyValue('--gray-text').replace('#', '')}" d="M4.516 7.548c.436-.446 1.043-.481 1.576 0L10 11.488l3.908-3.94c.533-.481 1.141-.446 1.574 0 .436.446.467 1.258.058 1.776L10 14.502 4.458 9.324c-.409-.518-.378-1.33.058-1.776z"/></svg>');
                                background-repeat: no-repeat;
                                background-position: left 15px center;
                                background-size: 10px;
                            ">
                                <option value="" disabled selected>بەشێک ھەڵبژێرە</option>
                                <!-- Options will be populated by JS -->
                            </select>

                            <!-- File Import (Real File Input) -->
                            <div style="display: flex; gap: 10px; align-items: center; border: 1px solid var(--input-border); border-radius: 5px; background-color: var(--input-bg); padding: 5px;">
                                <label for="book-file-input" class="btn secondary-btn btn-sm" style="flex-shrink: 0; margin: 0; background-color: var(--secondary-color); color: var(--white); cursor: pointer;">
                                    <i class="fas fa-file-pdf"></i> ئیمپۆرتی فایل
                                </label>
                                <input type="file" id="book-file-input" name="book-file" accept="application/pdf" required style="flex-grow: 1; padding: 10px; border: none; background: transparent; color: var(--light-text); outline: none; text-align: right; display: block; width: 100%;">
                            </div>

                            <!-- Image Import (Real File Input) -->
                            <div style="display: flex; gap: 10px; align-items: center; border: 1px solid var(--input-border); border-radius: 5px; background-color: var(--input-bg); padding: 5px;">
                                <label for="book-image-input" class="btn secondary-btn btn-sm" style="flex-shrink: 0; margin: 0; background-color: var(--secondary-color); color: var(--white); cursor: pointer;">
                                    <i class="fas fa-image"></i> ئیمپۆرتی وێنە
                                </label>
                                <input type="file" id="book-image-input" name="book-image" accept="image/*" required style="flex-grow: 1; padding: 10px; border: none; background: transparent; color: var(--light-text); outline: none; text-align: right; display: block; width: 100%;">
                            </div>

                            <button type="submit" class="btn primary-btn" id="publish-book-btn">
                                <i class="fas fa-upload"></i> بلاو کردنەوە
                            </button>
                            <button type="button" class="btn secondary-btn" id="cancel-edit-btn" style="display: none; background-color: #dc3545; color: var(--white);">
                                <i class="fas fa-times"></i> پاشگەزبوونەوە لە گۆڕانکاری
                            </button>
                            <p style="text-align: center; font-size: 0.8rem; color: #dc3545; margin-top: 10px;">
                                *دوای هەڵبژاردنی فایلەکان و بلابووندنەوە، پێویستە ئەم زانیاریانە بۆ داتابەیسێکی گشتی (وەک Firebase) بنێریت.
                            </p>
                        </form>
                    </div>

                    <!-- Manage Books Area -->
                    <div id="manage-books-area" class="category-block">
                        <h3 class="category-title">کتێبە زیادکراوەکان</h3>
                        <div class="book-grid" id="user-added-books-container">
                            <!-- User added books will be loaded here -->
                        </div>
                        <p id="no-user-books-message" style="text-align: center; font-size: 1.2rem; color: var(--gray-text); margin-top: 20px; display: none;">
                            هیچ کتێبێکی زیادکراو نییە.
                        </p>
                        <p style="text-align: center; font-size: 0.9rem; color: #dc3545; margin-top: 30px;">
                            تێبینی: بەهۆی نەبوونی سێرڤەری گشتی، کتێبەکان تەنها لەسەر ئەم ئامێرە خەزن دەکرێن. بۆ بڵاوکردنەوەی گشتی، دەبێت Firebase بەکاربهێنیت.
                        </p>
                    </div>
                </div>
                <!-- End CMS Content -->

            </div>
        </section>

        <!-- Contact Section (Example) -->
        <section id="contact" class="contact-section">
            <div class="container">
                <h2 class="section-title">پەیوەندی بە ئێمەوە بکە</h2>
                <p>بۆ ھەر پرسیارێک یان پێشنیارێک، تکایە پەیوەندی بە ئێمەوە بکە.</p>
                <form class="contact-form" action="https://formspree.io/f/your_formspree_id" method="POST"> <!-- Replace with your Formspree endpoint -->
                    <input type="text" name="name" placeholder="ناوت" required>
                    <input type="email" name="email" placeholder="ئیمەیڵەکەت" required>
                    <textarea name="message" placeholder="پەیامەکەت" rows="5" required></textarea>
                    <button type="submit" class="btn primary-btn">ناردنی پەیام</button>
                </form>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <p>&copy; 2023 کتێبخانەی شاھانە. ھەموو مافەکانی پارێزراون.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scrollToTopBtn" class="scroll-to-top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="script.js"></script>
</body>
</html>
